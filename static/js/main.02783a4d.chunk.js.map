{"version":3,"sources":["panels/Api/brands.js","panels/Api/location.js","panels/btns.js","panels/Api/category.js","panels/view.js","panels/main.js","App.js","reportWebVitals.js","index.js"],"names":["Category","Brand","GetName","name","toLowerCase","replace","split","GetIcon","category","url","absolute_url","name_url","undefined","GetAbsoluteUrl","DG","icon","iconUrl","iconRetinaUrl","iconSize","iconAnchor","getIp","a","publicIp","v4","getLocation_by_ip","ip","fetch","response","json","resp","parseFloat","Apiloc","ApiSetLocation","geoFindMe","hook","b","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","console","log","alert","viewPoint","dg_map","zoom","setView","setZoom","addMarkers","coordinates_array","markers","featureGroup","i","length","coordinates","marker","point","lon","addTo","e","fitBounds","getBounds","removeFrom","setResetMyLocation","process","getScreenLocation","Zoom","maps","onClick","zoomIn","className","src","alt","Zoom2","zoomOut","ZoomPanel","MyLocation","handler","KEY_GIS","deg2rad","deg","Math","PI","getDistanceFromLatLonInM","lat1","lon1","lat2","lon2","dLat","dLon","sin","cos","atan2","sqrt","distanceToString","round","toFixed","location","add_distance","object","distance","to_center","radius","viewpoints","base","URL","searchParams","set","parseInt","toString","result","items","map","Gis","get_by_category","limitStr","str","n","symb","substr","CategoryShops","CategotyListItem","row","ads","CategoryList","all","item","SearchListItem","text","address_name","SearchList","data","ViewPanel","useState","classPopUp","setClassPopUp","UserInput","setUserInput","classPopUpAll","setClassPopUpAll","DataQuery","setDataQuery","isMoreItem","openClass","closeClass","PopupState","new_state","getDataByQuery","q","ViewList","id","onChange","target","value","placeholder","empty","Home","setLocation","locationReset","setLocationReset","setMap","clearPoints","setClearPoints","query","handlerLocation2","search","useEffect","get_location","set_reset","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.02783a4d.chunk.js","sourcesContent":["import DG from \"2gis-maps\";\n\nconst Category =  {\n    \"аптека\": \"apteka.png\",\n    \"обувь\": \"shoes.png\",\n    \"одежда\": \"shirt.png\",\n    \"для спорта\": \"sport.png\",\n    \"для дома\": \"home.png\",\n    \"строительные\": \"hammer.png\",\n    \"кафе\": \"kafe.png\",\n    \"парикмахерская\": \"cut.png\",\n    \"продукты\": \"shop.png\"\n};\n\nconst Brand = {\n    \"пятерочка\": \"5.png\",\n    \"монетка\": \"monetka.png\"\n};\n\nfunction GetName(name){\n    name = name.toLowerCase();\n    name = name.replace(\" \", \"\");\n    name = name.split(\",\");\n    return name[0];\n}\n\nfunction GetAbsoluteUrl(category, name){\n    const url = process.env.PUBLIC_URL;\n    name = GetName(name);\n    category = GetName(category);\n    let absolute_url = url + \"/logos/brands/\";\n    let name_url = Brand[name];\n    if (name_url === undefined){\n        name_url = Category[category]\n        if (name_url === undefined){\n            let default_ = \"default.png\";\n            return absolute_url + default_;\n        }\n    }\n    return absolute_url + name_url;\n}\n\nfunction GetIcon(category, name){\n    let url = GetAbsoluteUrl(category, name);\n    let myIcon = DG.icon({\n        iconUrl: url,\n        iconRetinaUrl: url,\n        iconSize: [18, 18],\n        iconAnchor: [20, 20]\n    });\n    return myIcon\n}\n\nexport default GetIcon;\n","import publicIp from 'public-ip';\nimport DG from '2gis-maps'\nimport GetIcon from \"./brands\";\n\nasync function getIp(){\n    return publicIp.v4();\n}\n\nasync function getLocation_by_ip(ip){\n    const url = \"https://eugene.gubanov.site/r.php?ip=\";\n    let response = await fetch(url + ip);\n    let resp = await response.json();\n    return {\n        \"lat\": parseFloat(resp[\"latitude\"]),\n        \"lng\": parseFloat(resp[\"longitude\"])\n    }\n}\n\nasync function ApiSetLocation(){\n    const ip = await getIp();\n    return await getLocation_by_ip(ip);\n}\n\nfunction geoFindMe(hook) {\n    let a = null\n    let b = null\n\n    function success(position) {\n        const lat  = position.coords.latitude;\n        const lng = position.coords.longitude;\n        a = lat\n        b = lng\n        console.log(\"success\", lat, lng);\n        hook(a, b);\n    }\n\n    function error() {\n        alert(\"Errno\");\n        return [null, null]\n    }\n\n    if(!navigator.geolocation) {\n        alert(\"Поддержки нет!\");\n    } else {\n        navigator.geolocation.getCurrentPosition(success, error);\n    }\n}\n\nfunction viewPoint(dg_map, lat=null, lng=null, zoom=null){\n    if ((lat === null) && (lng === null)){\n\n    } else{\n        dg_map.setView(\n            [lat, lng],\n        );\n    }\n    if (zoom === null){}\n    else {\n        dg_map.setZoom(\n            zoom\n        );\n    }\n}\n\nfunction setResetMyLocation(dg_map, lat, lng){\n    let markers = DG.featureGroup();\n    function getScreenLocation(){\n        const url = process.env.PUBLIC_URL;\n        let myIcon = DG.icon({\n            iconUrl: url + \"/logos/self_locate.png\",\n            iconRetinaUrl: url + \"/logos/self_locate.png\",\n            iconSize: [28, 28],\n            iconAnchor: [28, 28]\n        });\n        return myIcon;\n    }\n\n    DG.marker(\n        [lat, lng],\n        {icon: getScreenLocation()}\n    ).addTo(\n        markers\n    );\n    function showMarkers() {\n        markers.addTo(\n            dg_map\n        );\n        dg_map.fitBounds(\n            markers.getBounds()\n        );\n    }\n\n    function hideMarkers() {\n        markers.removeFrom(\n            dg_map\n        );\n    }\n    return [showMarkers, hideMarkers];\n}\n\nfunction addMarkers(dg_map, coordinates_array, category){\n    let markers = DG.featureGroup()\n    for (let i = 0; i < coordinates_array.length; i++) {\n        let coordinates = coordinates_array[i];\n        try{\n            DG.marker(\n                [coordinates.point.lat, coordinates.point.lon],\n                {icon: GetIcon(\n                        category,\n                        coordinates.name,\n                    )}\n            ).addTo(\n                markers\n            );\n        } catch (e) {\n            console.log(coordinates.point);\n            console.log(\"O\", i, e);\n        }\n    }\n\n    function showMarkers() {\n        markers.addTo(\n            dg_map\n        );\n        dg_map.fitBounds(\n            markers.getBounds()\n        );\n    }\n\n    function hideMarkers() {\n        markers.removeFrom(\n            dg_map\n        );\n    }\n    return [showMarkers, hideMarkers];\n}\n\nconst Apiloc = {\n    getIp,\n    getLocation_by_ip,\n    ApiSetLocation,\n    geoFindMe,\n    viewPoint,\n    addMarkers,\n    setResetMyLocation\n}\nexport default Apiloc;\n","import React from 'react';\n\nconst url = process.env.PUBLIC_URL;\nconst Zoom = ({maps}) => {\n    return(\n        <div onClick={() => {\n            maps.zoomIn();\n        }} className=\"zoom-top-bar-up zoom-top-bar-btn\">\n            <img src={url + \"/logos/plus.svg\"} alt=\"PlusZoom\"/>\n        </div>\n        )\n\n}\nconst Zoom2 = ({maps}) => {\n    return(\n        <div onClick={() => {\n            maps.zoomOut();\n        }} className=\"zoom-top-bar-down zoom-top-bar-btn\">\n            <img src={url + \"/logos/minus.svg\"} alt=\"MinusZoom\"/>\n        </div>\n    )\n}\n\nexport const ZoomPanel = ({maps}) => {\n    return (\n        <div className=\"zoom-top-bar\">\n            <Zoom maps={maps}/>\n            <Zoom2 maps={maps}/>\n        </div>\n    );\n}\nexport const MyLocation = ({handler}) => {\n    return (\n        <div onClick={handler} className=\"to-image-btn btn-my-location\">\n            <img src={url + \"/logos/find.svg\"} alt=\"MyLocation\"/>\n        </div>\n    )\n}\nexport default ZoomPanel;","const KEY_GIS = \"rugtio3557\";\n\nfunction deg2rad(deg) {\n    return deg * (Math.PI/180)\n}\nfunction getDistanceFromLatLonInM(lat1,lon1,lat2,lon2) {\n    let R = 6371000; // Radius of the earth in m\n    let dLat = deg2rad(lat2-lat1);  // deg2rad below\n    let dLon = deg2rad(lon2-lon1);\n    let a =\n        Math.sin(dLat/2) * Math.sin(dLat/2) +\n        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *\n        Math.sin(dLon/2) * Math.sin(dLon/2)\n    ;\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    let d = R * c; // Distance in m\n    return d;\n}\nfunction distanceToString(a){\n    if (a === null){\n        return \"\";\n    }\n    if (a < 1000){\n        return Math.round((a / 100).toFixed(1) * 100) + \" м.\"\n    }\n    return (a / 1000).toFixed(2) + \" км.\"\n}\n\n\nasync function get_by_category(category, location, to_center=false, radius=2000, viewpoints=null){\n    let base = new URL(\"https://catalog.api.2gis.com/3.0/items\");\n    base.searchParams.set(\"key\", KEY_GIS);\n    base.searchParams.set(\"locale\", \"ru_RU\");\n    base.searchParams.set(\"fields\", [\n        \"items.point\",\n        \"items.address\",\n        \"items.reviews\",\n        \"items.schedule\",\n        \"items.contact_groups\",\n    ])\n    base.searchParams.set(\"q\", category);\n    base.searchParams.set(\"sort_point\", location[1] + \",\" + location[0])\n    if (viewpoints !== null){\n        base.searchParams.set(\"viewpoint1\", viewpoints[0][1] + \",\" + viewpoints[0][0])\n        base.searchParams.set(\"viewpoint2\", viewpoints[0][1] + \",\" + viewpoints[0][0])\n    }\n    if ((to_center !== null) && (to_center)){\n        base.searchParams.set(\"point\", location[1] + \",\" + location[0])\n    }\n    base.searchParams.set(\"radius\", parseInt(radius));\n    console.log(base.toString());\n    let response = await fetch(base.toString());\n    let resp = await response.json();\n    function add_distance(object){\n        let distance = null;\n        try{\n            let lat1 = object.point.lat;\n            let lng1 = object.point.lon;\n            distance = getDistanceFromLatLonInM(lat1, lng1, location[0], location[1]);\n        } catch (e){}\n        finally {\n            object.distance = {\n                'text': distanceToString(distance),\n                'distance': distance\n            }\n            return object\n        }\n    }\n    try{\n        resp.result.items = resp.result.items.map(add_distance);\n    } catch (e) {}\n    return resp\n}\nconst Gis = {\n    get_by_category,\n}\nexport default Gis;","import React, {useEffect, useState} from 'react';\n\nfunction limitStr(str, n, symb='...') {\n    if (!n && !symb) return str;\n    symb = symb || '...';\n    return str.substr(0, n - symb.length) + symb;\n}\n\nlet CategoryShops = [\n    [\"Аптека.png\", \"Аптека\", \"Реклама, если есть\"],\n    [\"Аптека.png\", \"Мусор\"],\n    [\"Аптека.png\", \"Хлеб\"],\n    [\"Аптека.png\", \"Аптека\", \"Реклама, если есть\"],\n]\n\nconst CategotyListItem = ({row, hook}) => {\n    console.log(row);\n    const url = process.env.PUBLIC_URL + \"/logos/\";\n    let ads = \"\"\n    if (row[2] !== undefined){\n        ads = (\n            <p className=\"gray-color\">{row[2]}</p>\n        )\n    }\n    return (\n        <div onClick={() => {\n            hook(row[1].toLowerCase());\n        }} className=\"category-list_item\">\n            <div>\n                <img src={url + row[0]}></img>\n                <div className=\"text\">\n                    <p>{row[1]}</p>\n                    {ads}\n                </div>\n            </div>\n            {/*<p className=\"gray-color\">300м</p>*/}\n        </div>\n    )\n}\nexport const CategoryList = ({hook}) => {\n    let all = CategoryShops.map((item) => {return <CategotyListItem hook={hook} row={item}/>});\n    return (\n        <div className=\"category-list\">{all}</div>\n    )\n}\n\nconst SearchListItem = ({row, hook}) => {\n    console.log(row);\n    const url = process.env.PUBLIC_URL + \"/logos/\";\n    let distance = \"\";\n    if ((row.distance.text !== undefined) && (row.distance.text !== \"\")){\n        distance = (\n            <p className=\"gray-color\">{row.distance.text}</p>\n        )\n    }\n    return (\n        <div onClick={() => {\n            hook(row[1].toLowerCase());\n        }} className=\"category-list_item\">\n            <div>\n                <img src={url + \"close.svg\"}></img>\n                <div className=\"text\">\n                    <p>{limitStr(row.name, 29)}</p>\n                    <p className=\"gray-color\">{row.address_name}</p>\n                </div>\n            </div>\n            {distance}\n        </div>\n    )\n}\nexport const SearchList = ({data, hook}) => {\n    try{\n        let all = data.map((item) => {return <SearchListItem hook={hook} row={item}/>});\n        return (\n            <div className=\"category-list\">{all}</div>\n        )\n    } catch (e) {\n        return (\n            <div className=\"category-list\">\n                ...\n            </div>\n        )\n    }\n\n}\n\nexport const ViewPanel = ({hook}) => {\n    const url = process.env.PUBLIC_URL + \"/logos/\";\n    const [classPopUp, setClassPopUp] = useState(\"popupClose\");\n    const [UserInput, setUserInput] = useState(\"\");\n    const [classPopUpAll, setClassPopUpAll] = useState(true);\n    const [DataQuery, setDataQuery] = useState([]);\n    const [isMoreItem, setIsMoreItem] = useState(false);\n    const openClass = \"popupOpen\";\n    const closeClass = \"popupClose\";\n    function Trigger(){\n        if ((classPopUp === openClass) || (classPopUp === \"\")){\n            PopupState(\"close\");\n        } else {\n            if (classPopUp === closeClass){\n                if (classPopUpAll){\n                    PopupState(\"open\");\n                } else {\n                    PopupState(\"\");\n                }\n\n            }\n        }\n    }\n    function PopupState(new_state){\n        console.log(\"new_state:\", new_state);\n        if (new_state === \"open\"){\n            setClassPopUp(openClass);\n        } else {\n            if (new_state === \"close\"){\n                setClassPopUp(closeClass);\n            } else {\n                setClassPopUp(\"\");\n            }\n        }\n    }\n\n    async function getDataByQuery(q){\n        if (q === \"\"){\n            setUserInput(\"\");\n            setClassPopUpAll(true);\n            setDataQuery([]);\n            // setIsMoreItem(false);\n        } else {\n            setUserInput(q);\n            let data = await hook(q);\n            setDataQuery(data);\n            console.log(\"search\", data);\n        }\n\n    }\n    let ViewList = \"\"\n    if (UserInput === \"\"){\n        ViewList = (\n            <div className=\"popup-container\">\n                <h1 className=\"gray-color\">Категории</h1>\n                <CategoryList hook={getDataByQuery}/>\n            </div>\n        )\n    } else {\n        if (isMoreItem){\n            //\n        } else {\n            ViewList = (\n                <div className=\"popup-container\">\n                    <SearchList data={DataQuery}/>\n                </div>\n            )\n        }\n    }\n    return (\n        <div id=\"popup-trigger-one\" className={\"popup p-full border-radius \" + classPopUp}>\n        <div onClick={Trigger} className=\"separating-line\"></div>\n        <div className=\"popup-container\">\n            <div className=\"search-box\">\n                <img className='search-box_img' src={url + \"search.svg\"} alt=\"search\"></img>\n                <input\n                    onClick={() => {PopupState(\"open\")}}\n                    onChange={(e) => {\n                        let value = e.target.value;\n                        getDataByQuery(value);\n                    }}\n                    placeholder=\"Введите место или адрес\"/>\n                <img className='search-box_img' src={url + \"close.svg\"} alt=\"close\"></img>\n            </div>\n        </div>\n        <div className=\"separating-line\"></div>\n            {ViewList}\n    </div>\n    )\n}","import React, {useEffect, useState} from 'react';\nimport {Container, Row, Col} from 'react-bootstrap'\nimport { Link } from 'react-router-dom';\nimport DG from '2gis-maps'\nimport '../App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Apiloc from './Api/location.js';\nimport Share from \"./btns\";\nimport Gis from \"./Api/category\";\nimport {ZoomPanel, MyLocation} from \"./btns\";\nimport {ViewPanel} from \"./view\";\n\nfunction empty(){}\n\nfunction Home() {\n    // const [popout, setPopout] = useState(<Container size='large' />);\n    const [location, setLocation] = useState(null);\n    const [locationReset, setLocationReset] = useState([empty]);\n    const [dg_map, setMap] = useState(null);\n    const [clearPoints, setClearPoints] = useState([empty, empty]);\n\n    function handlerLocation(){\n        function r(a, b){\n            if (!((a === null) || (b === null))){\n                Apiloc.viewPoint(dg_map, a, b, 18);\n                setLocation([a, b]);\n                let set_reset = Apiloc.setResetMyLocation(\n                    dg_map, a, b\n                );\n                locationReset[0]();\n                setLocationReset([set_reset[1]]);\n                set_reset[0]();\n            }\n        }\n        Apiloc.geoFindMe(r);\n    }\n    async function startQuery(query){\n        let data = await handlerLocation2(query);\n        return data\n    }\n    async function handlerLocation2(q=\"Аптека\"){\n        let search = await Gis.get_by_category(q, location);\n        if ((search.result !== undefined) && (search.result.items !== undefined)){\n            try{\n                let new_state = Apiloc.addMarkers(dg_map, search.result.items, q);\n                clearPoints[1]();\n                setClearPoints(new_state);\n                new_state[0]();\n                return search.result.items\n            } catch (e) {\n                console.log(e);\n            }\n            return []\n        }\n    }\n\n    useEffect(() => {\n        async function get_location(){\n            const a = await Apiloc.ApiSetLocation();\n            // setPopout(null);\n            setLocation([a['lat'], a['lng']]);\n            try {\n                let map = DG.map('map', {\n                    'center': [a['lat'], a['lng']],\n                    'zoom': 13\n                });\n                setMap(map);\n            } catch (e){\n                console.log(e);\n            }\n\n\n        }\n        get_location();\n    }, [])\n\n    return (\n        <div className=\"main-map\">\n            <div id=\"map\"/>\n            <ZoomPanel maps={dg_map}/>\n            <MyLocation handler={handlerLocation}/>\n            <ViewPanel hook={startQuery}/>\n        </div>\n    );\n}\n\nexport default Home;\n","import React from 'react';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport Home from \"./panels/main\";\n// import 'bootstrap/dist/css/bootstrap.min.css';\n\nimport './App.css';\n\nfunction App() {\n  return (\n      <div className=\"App\">\n        <main>\n            {/*<BrowserRouter>*/}\n            {/*    <Switch>*/}\n            {/*        <Route exact path='/' component={Home}/>*/}\n            {/*        <Route path='/home' component={Home}/>*/}\n            {/*    </Switch>*/}\n            {/*</BrowserRouter>*/}\n            <Home />\n        </main>\n      </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}